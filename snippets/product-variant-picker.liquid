{% comment %}
  Renders product variant-picker

  Accepts:
  - product: {Object} product object.
  - block: {Object} passing the block information.
  - product_form_id: {String} Id of the product form to which the variant picker is associated.
  Usage:
  {% render 'product-variant-picker', product: product, block: block, product_form_id: product_form_id %}
{% endcomment %}
{%- unless product.has_only_default_variant -%}
  <variant-selects
    id="variant-selects-{{ section.id }}"
    data-section="{{ section.id }}"
    {{ block.shopify_attributes }}
  >
    {%- for option in product.options_with_values -%}
      {%- liquid
        assign swatch_count = option.values | map: 'swatch' | compact | size
        assign picker_type = block.settings.picker_type

        if swatch_count > 0 and block.settings.swatch_shape != 'none'
          if block.settings.picker_type == 'dropdown'
            assign picker_type = 'swatch_dropdown'
          else
            assign picker_type = 'swatch'
          endif
        endif
      -%}
      {%- if picker_type == 'swatch' -%}
        <fieldset class="js product-form__input product-form__input--swatch">
          <legend class="form__label">
            {{ option.name }}:
            <span data-selected-value>
              {{- option.selected_value -}}
            </span>

            {% comment %} start {% endcomment %}
            <!-- Info button -->
            <div class="color-info-btn" aria-label="More info">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
                <path d="M 25 2 C 12.309295 2 2 12.309295 2 25 C 2 37.690705 12.309295 48 25 48 C 37.690705 48 48 37.690705 48 25 C 48 12.309295 37.690705 2 25 2 z M 25 4 C 36.609824 4 46 13.390176 46 25 C 46 36.609824 36.609824 46 25 46 C 13.390176 46 4 36.609824 4 25 C 4 13.390176 13.390176 4 25 4 z M 25 11 A 3 3 0 0 0 22 14 A 3 3 0 0 0 25 17 A 3 3 0 0 0 28 14 A 3 3 0 0 0 25 11 z M 21 21 L 21 23 L 22 23 L 23 23 L 23 36 L 22 36 L 21 36 L 21 38 L 22 38 L 23 38 L 27 38 L 28 38 L 29 38 L 29 36 L 28 36 L 27 36 L 27 21 L 26 21 L 22 21 L 21 21 z"/>
              </svg>
            </div>
            {% if product.selected_or_first_available_variant.metafields.custom.color_info != blank %}
              <div class="color-tooltip">
                {{ product.selected_or_first_available_variant.metafields.custom.color_info }}
              </div>
            {% endif %}

            <!-- Tooltip (content from metafield) -->

            <!-- Explore all colours -->
            <a href="#" class="explore-colours-link">Explore all colours</a>
            {% comment %} end {% endcomment %}
          </legend>
          {% render 'product-variant-options',
            product: product,
            option: option,
            block: block,
            picker_type: picker_type
          %}
        </fieldset>
      {%- elsif picker_type == 'button' -%}
        <fieldset class="js product-form__input product-form__input--pill">
          <legend class="form__label">
            {{ option.name }} :
            <span data-selected-size>
              {{- option.selected_value -}}
            </span>
          </legend>
          {% render 'product-variant-options',
            product: product,
            option: option,
            block: block,
            picker_type: picker_type
          %}
        </fieldset>
        <div class="oil-calculator-box">
          <!-- Question mark SVG -->
          <svg
            width="25"
            height="25"
            viewBox="0 0 25 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
          >
            <rect width="25" height="25" fill="url(#pattern0_794_661)"/>
            <defs>
            <pattern id="pattern0_794_661" patternContentUnits="objectBoundingBox" width="1" height="1">
            <use xlink:href="#image0_794_661" transform="scale(0.0078125)"/>
            </pattern>
            <image id="image0_794_661" width="128" height="128" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
            </defs>
          </svg>

          <!-- Text -->
          <div class="oil-calculator-text">
            <span>Not sure how much oil you need?</span>
            <a href="/pages/oil-calculator" id="openCalc">Try our Oil Calculator</a>
          </div>
        </div>

      {%- else -%}
        <div class="product-form__input product-form__input--dropdown">
          <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
            {{ option.name }}
          </label>
          <div class="select">
            {%- if picker_type == 'swatch_dropdown' -%}
              <span
                data-selected-value
                class="dropdown-swatch"
              >
                {% render 'swatch', swatch: option.selected_value.swatch, shape: block.settings.swatch_shape %}
              </span>
            {%- endif -%}
            <select
              id="Option-{{ section.id }}-{{ forloop.index0 }}"
              class="select__select"
              name="options[{{ option.name | escape }}]"
              form="{{ product_form_id }}"
            >
              {% render 'product-variant-options',
                product: product,
                option: option,
                block: block,
                picker_type: picker_type
              %}
            </select>
            <span class="svg-wrapper">
              {{- 'icon-caret.svg' | inline_asset_content -}}
            </span>
          </div>
        </div>
      {%- endif -%}
    {%- endfor -%}

    <script type="application/json" data-selected-variant>
      {{ product.selected_or_first_available_variant | json }}
    </script>
  </variant-selects>
{%- endunless -%}
<script>
  document.addEventListener('variant:change', function (event) {
    const variant = event.detail.variant;
    if (!variant) return;

    // Update tooltip text dynamically
    const tooltip = document.querySelector('.color-tooltip');
    if (tooltip && variant.metafields?.custom?.color_info) {
      tooltip.innerHTML = variant.metafields.custom.color_info.value || '';
    }
  });
</script>
