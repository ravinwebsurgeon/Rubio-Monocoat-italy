<div class="fullscreen-modal-main">
    <div class="fullscreen-modal">
        <img class="fullscreen-image" src="" alt="Full Image">
        <video class="fullscreen-video" controls playsinline></video>
    </div>

    <div class="close-modal-image">
        <button class="close-fullscreen">Ã—</button>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const modal = document.querySelector('.fullscreen-modal');
        const modalImg = modal.querySelector('.fullscreen-image');
        const modalVideo = modal.querySelector('.fullscreen-video');
        const closeBtn = modal.parentNode.querySelector('.close-fullscreen');

        // Select all clickable MEDIA (images + videos)
        const thumbnailImages = document.querySelectorAll('.thumbnail-item img');
        const thumbnailVideos = document.querySelectorAll('.thumbnail-item video');

        const mainImages = document.querySelectorAll('.main-image-item img');

        const allMedia = [...thumbnailImages, ...thumbnailVideos, ...mainImages];

        // ---- OPEN FULLSCREEN ----
        allMedia.forEach(item => {
            item.addEventListener('click', function (e) {
                e.preventDefault();

                // Hide both initially
                modalImg.style.display = 'none';
                modalVideo.style.display = 'none';
                modalVideo.pause();

                if (item.tagName.toLowerCase() === 'video') {
                    // Open video in modal
                    modalVideo.src = item.querySelector('source').src;
                    modalVideo.style.display = 'block';
                    modalVideo.play();
                } else {
                    // Open image in modal
                    modalImg.src = item.src;
                    modalImg.style.display = 'block';
                }

                modal.classList.add('active');
            });
        });

        // ---- CLOSE FULLSCREEN ----
        function closeModal() {
            modal.classList.add('closing');
            setTimeout(() => {
                modal.classList.remove('active', 'closing');
                modalVideo.pause();
                modalVideo.src = ""; // Stop load after closing
            }, 350);
        }

        closeBtn.addEventListener('click', closeModal);

        modal.addEventListener('click', e => {
            if (e.target === modal) closeModal();
        });
    });


</script>

<style>
.fullscreen-modal img,
.fullscreen-modal video {
    max-width: 90vw;
    max-height: 90vh;
    object-fit: contain;
    transform: scale(.8);
    transition: transform .35s ease;
}

.fullscreen-modal.active img,
.fullscreen-modal.active video {
    transform: scale(1);
}

.fullscreen-modal.closing img,
.fullscreen-modal.closing video {
    transform: scale(0.6);
}
</style>