<div class="calc-overlay" id="calcOverlay"></div>

<div class="calc-panel" id="calcPanel">
  <button class="calc-close" id="closeCalc">✕</button>
  <h2>Try Our Paint Calculator</h2>
  <p>Our Paint Calculator will work out how much paint you need based on your room size.  
     We’ll give you an estimate for at least 2 coats.</p>

  <h3>Where are you painting?</h3>
  <div class="calc-choices">
    <button class="calc-choice" data-type="walls">Walls</button>
    <button class="calc-choice" data-type="ceiling">Ceiling</button>
  </div>

  <div class="calc-form" id="calcForm" style="display:none;">
    <label>Room Length (m):</label>
    <input type="number" id="length" placeholder="e.g. 5">

    <label>Room Width (m):</label>
    <input type="number" id="width" placeholder="e.g. 4">

    <label>Room Height (m):</label>
    <input type="number" id="height" placeholder="e.g. 2.5">

    <label>Coverage (m² per L):</label>
    <input type="number" id="coverage" placeholder="e.g. 12" value="12">

    <label>Number of Coats:</label>
    <input type="number" id="coats" placeholder="2" value="2">

    <button id="calcBtn">Calculate</button>
  </div>

  <div class="calc-result" id="calcResult"></div>
</div>

<style>
/* Trigger */
.calc-link { font-size:14px; margin:10px 0; }
.calc-link a { color:#004c3f; font-weight:600; cursor:pointer; }

/* Overlay */
.calc-overlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.4);
  display:none;
  z-index:999;
}

/* Panel */
.calc-panel {
  position:fixed;
  top:0;
  right:-400px;
  width:400px;
  height:100%;
  background:#fff;
  box-shadow:-3px 0 10px rgba(0,0,0,0.2);
  padding:30px;
  z-index:1000;
  transition:right 0.3s ease;
  overflow-y:auto;
  font-family:sans-serif;
}
.calc-panel.open { right:0; }
.calc-close {
  position:absolute;
  top:15px;
  right:15px;
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}
.calc-choices {
  display:flex;
  flex-direction:column;
  gap:10px;
  margin:20px 0;
}
.calc-choice {
  padding:12px;
  border:2px solid #004c3f;
  border-radius:25px;
  background:#fff;
  cursor:pointer;
  font-weight:600;
}
.calc-choice:hover { background:#004c3f; color:#fff; }
.calc-form label { display:block; margin:10px 0 5px; }
.calc-form input {
  width:100%; padding:8px; margin-bottom:10px;
  border:1px solid #ccc; border-radius:5px;
}
#calcBtn {
  display:block; width:100%; padding:12px;
  background:#004c3f; color:#fff;
  border:none; border-radius:8px;
  cursor:pointer;
  font-weight:600;
}
.calc-result {
  margin-top:20px;
  padding:15px;
  background:#f5f5f5;
  border-radius:8px;
  font-weight:600;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function(){
  const openBtn   = document.getElementById("openCalc");
  const closeBtn  = document.getElementById("closeCalc");
  const panel     = document.getElementById("calcPanel");
  const overlay   = document.getElementById("calcOverlay");
  const choices   = document.querySelectorAll(".calc-choice");
  const form      = document.getElementById("calcForm");
  const calcBtn   = document.getElementById("calcBtn");
  const resultBox = document.getElementById("calcResult");

  // Open
  openBtn.addEventListener("click", e=>{
    e.preventDefault();
    panel.classList.add("open");
    overlay.style.display="block";
  });

  // Close
  closeBtn.addEventListener("click", ()=>{
    panel.classList.remove("open");
    overlay.style.display="none";
    form.style.display="none";
    resultBox.innerHTML="";
  });
  overlay.addEventListener("click", ()=>closeBtn.click());

  // Choice
  choices.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      form.style.display="block";
      resultBox.innerHTML="";
    });
  });

  // Calculate
  calcBtn.addEventListener("click", e=>{
    e.preventDefault();
    const length   = parseFloat(document.getElementById("length").value) || 0;
    const width    = parseFloat(document.getElementById("width").value) || 0;
    const height   = parseFloat(document.getElementById("height").value) || 0;
    const coverage = parseFloat(document.getElementById("coverage").value) || 1;
    const coats    = parseFloat(document.getElementById("coats").value) || 1;

    // Wall area (approx 2*(L+W)*H)
    const wallArea = 2 * (length + width) * height;

    // Ceiling area (L*W)
    const ceilingArea = length * width;

    // Total area
    const totalArea = wallArea + ceilingArea;

    const litersNeeded = (totalArea * coats) / coverage;
    const tins = Math.ceil(litersNeeded);

    resultBox.innerHTML = `
      <strong>Total Area:</strong> ${totalArea.toFixed(2)} m² <br>
      <strong>Liters Needed:</strong> ${litersNeeded.toFixed(1)} L <br>
      <strong>Suggested Tins:</strong> ${tins} x 1L tins
    `;
  });
});
</script>
