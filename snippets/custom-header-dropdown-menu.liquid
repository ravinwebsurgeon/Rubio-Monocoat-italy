  {% assign lang = localization.language.iso_code | downcase %}
<nav class="custom_header__inline-menu header__inline-menu">
  <ul class="custom_list-menu">
    {% assign main_parent_index = 0 %}
    {%- for link in section.settings.menu.links -%}
      {% assign main_parent_index = main_parent_index | plus: 1 %} 
      {% assign first_child = main_parent_index | append: "" %} 
      <li class="main_menu_item">
        {%- if link.links != blank -%}
           {% assign final_url = link.url %}
            {% capture final_url %}
                {% render 'menu-refined-url', link_url: link.url, lang: lang %}
            {% endcapture %}
          <a href="{{ final_url | strip }}" data-market-country="{{localization.country.iso_code }}" data-lang="{{ lang }}" data-final-url="{{- link.url -}}">{{- link.title -}} <svg width="8" height="6" viewBox="0 0 8 6" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.75 1.5L3.75 4.5L0.75 1.5" stroke="var(--color-header-links, --color-accent)" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </a>
          <div class="mega_menu_items_wrapper position__{{ first_child }}  item_{{- link.title -}}">
            <div class="mega_menu_items_blocks">
                {% comment %} <div class="menu_custom_block_wrappper">
                  {% for block in section.blocks %}
                    {% if block.type == 'mega_menu' %}
                      {% assign menutitle = block.settings.menu_title | handle %}
                      {% assign menulinktitle = link.title | handle %}
                      {% if menulinktitle == menutitle %}
                        <div class="menu_custom_block">
                          {% if block.settings.block_image %}
                              <div class="menu_custom_block_img">
                            <img
                              loading="lazy"
                              height="auto"
                              width="auto"
                              src="{{- block.settings.block_image |img_url:'350x350' -}}"
                              alt="{{- block.settings.block_image.alt -}}"
                            >
                                </div>
                            {% else %}
                              {% if block.settings.video != blank %}
                                  <div class="video-chose">
                                      {{ block.settings.video | video_tag: controls: false, autoplay: false, loop: false, muted: true, id: "myVideo" }}
                                      <button id="playButton" class="video-play-btn">
                                        <svg fill="#fff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 390 390" xml:space="preserve">
                                          <g>
                                          <g>
                                            <path d="M195,0C87.303,0,0,87.303,0,195c0,107.697,87.303,195,195,195c107.697,0,195-87.303,195-195C390,87.303,302.697,0,195,0z
                                              M253.871,211.921l-66.328,66.326c-4.578,4.577-10.702,7.011-16.927,7.011c-3.085,0-6.189-0.594-9.152-1.82
                                              c-8.94-3.704-14.774-12.431-14.774-22.106V128.669c0-9.676,5.834-18.403,14.774-22.108c8.94-3.701,19.23-1.654,26.079,5.191
                                              l66.328,66.328C263.215,187.424,263.215,202.576,253.871,211.921z"></path>
                                          </g>
                                          </g>
                                        </svg>
                                      </button>
                                    </div>

                                  {% endif %}
                                {% endif %}
                          
                          {% if block.settings.block_subtext != blank or block.settings.block_heading != blank or block.settings.block_subtext-h != blank %}
                            <div class="menu_custom_block_content">
                              <p class="menu_custom_block_heading">{{- block.settings.block_heading -}}</p>
                              <span class="menu_custom_block_subtext">
                                {{- block.settings.block_subtext -}}
                              </span>

                            </div>
                          {% endif %}
                        {% if block.settings.block_link != blank %}
                          <a href="{{- block.settings.block_link -}}"></a>
                        {% endif %}
                        </div>
                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </div> {% endcomment %}

              <ul class="child_menu_links">
                <div class="shown-link">
                  {% assign parent_index = 0 %}
                  {% for childlink in link.links %}
                    {% assign parent_index = parent_index | plus: 1 %}
                    {% assign child_key = first_child | append: "." | append: parent_index %}
                      <div class="sub-main-lnk {{child_key }}" >
                        <div class="both-li"  data-key="{{ child_key }}">
                          {%- assign child_handle = childlink.title | handle -%}
                            {% comment %} {%- assign child_handle = childlink.handle   -%} {% endcomment %}
                          {% for block in section.blocks %}
                            {% if block.type == 'Custom_images' %}
                              {% assign menu_t = block.settings.sub-menu_title | handle %}
                              {% assign keys = block.settings.menu_key | split: "," %}
                              {% comment %} {% if block.settings.menu_key == child_key %} {% endcomment %}

                                {% if keys contains child_key %}
                                <div class="let-im">
                                  <img src="{{ block.settings.menu_image | img_url:'thumbnail' }}" alt="{{ childlink.title }}">
                                </div>
                              {% endif %}
                              
                            {% endif %}
                          {% endfor %}
                          <li class="main-sub-child_menu_item" data-custom-menu-key="{{childlink.handle  }}">
                              {% capture final_url %}
                                  {% render 'menu-refined-url', link_url: childlink.url, lang: lang %}
                                {% endcapture %}
                            <a href="{{ final_url | strip }}" data-final-url="{{ childlink.url }}">{{ childlink.title }}</a>
                          </li>
                        </div>
                        {% if childlink.links %}
                            {% assign child_sub_index = 0 %}
                            {% for grandchildlink in childlink.links %}
                              {% assign child_sub_index = child_sub_index | plus: 1 %}
                              {% assign grand_key = child_key | append: "." | append: child_sub_index %}
                              <div class="both-li" data-key="{{ grand_key }}">
                                {%- assign grand_handle = grandchildlink.title | handle -%}
                                {% comment %} {%- assign grand_handle = grandchildlink.url -%} {% endcomment %}
                                {% for block in section.blocks %}
                                  {% if block.type == 'Custom_images' %}
                                    {% assign menu_t = block.settings.sub-menu_title  %}
                                    {% comment %} {% if menu_t == grand_handle %} {% endcomment %}
                                    {% assign keys = block.settings.menu_key | split: "," %}
                                    {% if keys contains grand_key %}
                                      <div class="let-im">
                                        <img src="{{ block.settings.menu_image | img_url:'thumbnail' }}" alt="{{ grandchildlink.title }}">
                                      </div>
                                        <div class="tag-text">{{ block.settings.tag_title }}</div>
                                    {% endif %}
                                  {% endif %}
                                {% endfor %}
                                <li class="child_menu_item"  data-custom-menu-child-key="{{grandchildlink.url }}">
                                  {% capture final_url %}
                                      {% render 'menu-refined-url', link_url: grandchildlink.url, lang: lang %}
                                  {% endcapture %}
                                  <a href="{{ final_url | strip }}" data-shop="{{shop.domain }}" data-final-url="{{ grandchildlink.url }}">{{ grandchildlink.title }}</a>
                                </li>
                              </div>
                            {% endfor %}
                        {% endif %}
                      </div>

                      {% for block in section.blocks %}
                    {% if block.type == 'mega_menu' %}
                      {% assign menutitle = block.settings.menu_title | handle %}
                      {% assign menulinktitle = link.title | handle %}
                      {% assign keys = block.settings.menu_key_1 %}
                      {% comment %} {% if menulinktitle == menutitle %} {% endcomment %}
                      {% if keys == child_key %}
                        <div class="menu_custom_block {{ child_key }} {{ keys }}">
                          {% if block.settings.block_image %}
                            <div class="menu_custom_block_img">
                              <img
                                loading="lazy"
                                height="auto"
                                width="auto"
                                src="{{- block.settings.block_image |img_url:'350x350' -}}"
                                alt="{{- block.settings.block_image.alt -}}"
                              >
                            </div>
                          {% else %}
                            {% if block.settings.video != blank %}
                              <div class="video-chose">
                                {{ block.settings.video | video_tag: controls: false, autoplay: false, loop: false, muted: true, id: "myVideo" }}
                                <button id="playButton" class="video-play-btn">
                                  <svg fill="#fff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 390 390" xml:space="preserve">
                                    <g>
                                    <g>
                                      <path d="M195,0C87.303,0,0,87.303,0,195c0,107.697,87.303,195,195,195c107.697,0,195-87.303,195-195C390,87.303,302.697,0,195,0z
                                        M253.871,211.921l-66.328,66.326c-4.578,4.577-10.702,7.011-16.927,7.011c-3.085,0-6.189-0.594-9.152-1.82
                                        c-8.94-3.704-14.774-12.431-14.774-22.106V128.669c0-9.676,5.834-18.403,14.774-22.108c8.94-3.701,19.23-1.654,26.079,5.191
                                        l66.328,66.328C263.215,187.424,263.215,202.576,253.871,211.921z"></path>
                                    </g>
                                    </g>
                                  </svg>
                                </button>
                                 <div class="video_tag__badge">{{block.settings.video_badge}}</div> 
                                <div class="video_text_content">
                                  <div class="video_text">
                                    <div class="video__text__content">
                                      <h2>{{ block.settings.video_text }}</h2>
                                      <p class="custom_video_subtext">{{ block.settings.video_subtext }}</p>
                                    </div>
                                    {% if block.settings.video_btn_link %}
                                      <div class="video__btn__content">
                                        <a href="{{ block.settings.video_btn_link }}" class="btn__redirection">
                                          {% if block.settings.video_btn %}
                                            <button>{{ block.settings.video_btn }}</button>
                                            {% comment %} <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                              xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2"
                                                  stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg> {% endcomment %}
                                          {% endif %}
                                        </a>
                                      </div>
                                    {% endif %}
                                  </div>
                                </div>
                              </div>
                            {% endif %}
                          {% endif %}
                          {% if block.settings.block_subtext != blank or block.settings.block_heading != blank or block.settings.block_subtext-h != blank %}
                            <div class="menu_custom_block_content">
                              <p class="menu_custom_block_heading">{{- block.settings.block_heading -}}</p>
                              <span class="menu_custom_block_subtext">
                                {{- block.settings.block_subtext -}}
                              </span>
                            </div>
                          {% endif %}
                          {% if block.settings.block_link != blank %}
                            <a href="{{- block.settings.block_link -}}"></a>
                          {% endif %}
                        </div>
                      {% endif %}
                    {% endif %}
                  {% endfor %}

                  {% endfor %}
                  {% comment %} {% for block in section.blocks %}
                    {% if block.type == 'mega_menu' %}
                      {% assign menutitle = block.settings.menu_title | handle %}
                      {% assign menulinktitle = link.title | handle %}
                      {% assign keys = block.settings.menu_key_1 %}
                      {% comment %} {% if menulinktitle == menutitle %} {% endcomment %}
                      {% if keys == child_key %}
                        <div class="menu_custom_block {{ child_key }} {{ keys }}">
                          {% if block.settings.block_image %}
                            <div class="menu_custom_block_img">
                              <img
                                loading="lazy"
                                height="auto"
                                width="auto"
                                src="{{- block.settings.block_image |img_url:'350x350' -}}"
                                alt="{{- block.settings.block_image.alt -}}"
                              >
                            </div>
                          {% else %}
                            {% if block.settings.video != blank %}
                              <div class="video-chose">
                                {{ block.settings.video | video_tag: controls: false, autoplay: false, loop: false, muted: true, id: "myVideo" }}
                                <button id="playButton" class="video-play-btn">
                                  <svg fill="#fff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 390 390" xml:space="preserve">
                                    <g>
                                    <g>
                                      <path d="M195,0C87.303,0,0,87.303,0,195c0,107.697,87.303,195,195,195c107.697,0,195-87.303,195-195C390,87.303,302.697,0,195,0z
                                        M253.871,211.921l-66.328,66.326c-4.578,4.577-10.702,7.011-16.927,7.011c-3.085,0-6.189-0.594-9.152-1.82
                                        c-8.94-3.704-14.774-12.431-14.774-22.106V128.669c0-9.676,5.834-18.403,14.774-22.108c8.94-3.701,19.23-1.654,26.079,5.191
                                        l66.328,66.328C263.215,187.424,263.215,202.576,253.871,211.921z"></path>
                                    </g>
                                    </g>
                                  </svg>
                                </button>
                                 <div class="video_tag__badge">{{block.settings.video_badge}}</div> 
                                <div class="video_text_content">
                                  <div class="video_text">
                                    <div class="video__text__content">
                                      <h2>{{ block.settings.video_text }}</h2>
                                      <p class="custom_video_subtext">{{ block.settings.video_subtext }}</p>
                                    </div>
                                    {% if block.settings.video_btn_link %}
                                      <div class="video__btn__content">
                                        <a href="{{ block.settings.video_btn_link }}" class="btn__redirection">
                                          {% if block.settings.video_btn %}
                                            <button>{{ block.settings.video_btn }}</button>
                                            {% comment %} <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                              xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2"
                                                  stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg> {% endcomment %}
                                          {% endif %}
                                        </a>
                                      </div>
                                    {% endif %}
                                  </div>
                                </div>
                              </div>
                            {% endif %}
                          {% endif %}
                          {% if block.settings.block_subtext != blank or block.settings.block_heading != blank or block.settings.block_subtext-h != blank %}
                            <div class="menu_custom_block_content">
                              <p class="menu_custom_block_heading">{{- block.settings.block_heading -}}</p>
                              <span class="menu_custom_block_subtext">
                                {{- block.settings.block_subtext -}}
                              </span>
                            </div>
                          {% endif %}
                          {% if block.settings.block_link != blank %}
                            <a href="{{- block.settings.block_link -}}"></a>
                          {% endif %}
                        </div>
                      {% endif %}
                    {% endif %}
                  {% endfor %} {% endcomment %}
                </div>
              </ul>
            </div>
            {% unless link.title == "Products" %}
              <div class="register-menu">
                <a href="{{ section.settings.btn-link }}"><div class="reg-btn">{{ section.settings.btn }}</div></a>
              </div>
            {% endunless %}
          </div>
        {% else %}
          <a href="{{- link.url -}}">{{- link.title -}}</a>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>


{% comment %} <script>
document.addEventListener('DOMContentLoaded', function() {
  const video = document.getElementById('myVideo');
  const playButton = document.getElementById('playButton');

  playButton.addEventListener('click', () => {
    if (video.paused) {
      video.play();
      playButton.textContent = 'Pause'; 
    } else {
      video.pause();
      playButton.textContent = 'Play';
    }
  });
});


document.querySelectorAll('.main_menu_item').forEach((item) => {
  item.addEventListener('mouseenter', () => {
    if (item.querySelector('.mega_menu_items_wrapper')) {
      document.querySelector('.section-header').classList.add('mega-open');
    }
  });

  item.addEventListener('mouseleave', () => {
    if (item.querySelector('.mega_menu_items_wrapper')) {
      document.querySelector('.section-header').classList.remove('mega-open');
    }
  });
});
</script> {% endcomment %}

{% comment %} <script>
document.addEventListener('DOMContentLoaded', function() {
  // Handle all video blocks
  const videoBlocks = document.querySelectorAll('.video-chose');

  videoBlocks.forEach(block => {
    const video = block.querySelector('video');
    const playButton = block.querySelector('.video-play-btn');

    if (video && playButton) {
      
      // When play button is clicked
      playButton.addEventListener('click', () => {
        if (video.paused) {
          // Hide the play icon and play video
          video.play();
          playButton.style.display = 'none';
        } else {
          // Pause and show the play icon
          video.pause();
          playButton.style.display = 'flex';
        }
      });

      // When video ends → show play icon again
      video.addEventListener('ended', () => {
        playButton.style.display = 'flex';
      });

      // If video is paused manually
      video.addEventListener('pause', () => {
        playButton.style.display = 'flex';
      });

      // If video starts playing (from anywhere)
      video.addEventListener('play', () => {
        playButton.style.display = 'none';
      });
    }
  });

  // Mega menu hover effect
  document.querySelectorAll('.main_menu_item').forEach(item => {
    item.addEventListener('mouseenter', () => {
      if (item.querySelector('.mega_menu_items_wrapper')) {
        document.querySelector('.section-header').classList.add('mega-open');
      }
    });

    item.addEventListener('mouseleave', () => {
      if (item.querySelector('.mega_menu_items_wrapper')) {
        document.querySelector('.section-header').classList.remove('mega-open');
      }
    });
  });
});
</script> {% endcomment %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Handle all video blocks
  const videoBlocks = document.querySelectorAll('.video-chose');

  videoBlocks.forEach(block => {
    const video = block.querySelector('video');
    const playButton = block.querySelector('.video-play-btn');

    if (video && playButton) {

      // When play button is clicked 
      playButton.addEventListener('click', () => {
        if (video.paused) {
          // Play video
          video.play();
          playButton.style.display = 'none';
        } else {
          // Pause video
          video.pause();
          playButton.style.display = 'flex';
        }
      });

      // Also pause when clicking on the video itself
      video.addEventListener('click', () => {
        if (video.paused) {
          video.play();
          playButton.style.display = 'none';
        } else {
          video.pause();
          playButton.style.display = 'flex';
        }
      });

      // When video ends → show play icon again
      video.addEventListener('ended', () => {
        playButton.style.display = 'flex';
      });

      // When paused manually → show play icon
      video.addEventListener('pause', () => {
        playButton.style.display = 'flex';
      });

      // When playing → hide play icon
      video.addEventListener('play', () => {
        playButton.style.display = 'none';
      });
    }
  });

  // Mega menu hover effect
  document.querySelectorAll('.main_menu_item').forEach(item => {
    item.addEventListener('mouseenter', () => {
      if (item.querySelector('.mega_menu_items_wrapper')) {
        document.querySelector('.section-header').classList.add('mega-open');
      }
    });

    item.addEventListener('mouseleave', () => {
      if (item.querySelector('.mega_menu_items_wrapper')) {
        document.querySelector('.section-header').classList.remove('mega-open');
      }
    });
  });
});
</script>


