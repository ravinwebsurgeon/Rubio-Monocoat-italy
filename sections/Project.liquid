<div class="cust-project">
  <div class="page-width">
    <div class="cust-pro-wrap">
      <h3 class="heading-pr">{{ section.settings.heading }}</h3>

      <div class="main-pro-wrap">
        <!-- Interior / Exterior Images -->
        <div class="pro-first">
          <div class="Interio">
            {% if section.settings.img1 %}
              <img src="{{ section.settings.img1 | img_url: 'master' }}" alt="Interior">
            {% endif %}
            <div class="inter-btn" id="interior">Interior</div>
          </div>

          <div class="exterior">
            {% if section.settings.img2 %}
              <img src="{{ section.settings.img2 | img_url: 'master' }}" alt="Exterior">
            {% endif %}
            <div class="exter-btn" id="exterior">Exterior</div>
          </div>
        </div>

        <!-- Tabs + Products -->
        <div class="pro-second">
          <div class="circle-tabs-section">
  <div class="pagffg">
    {% if section.settings.heading != blank %}
      <h3 class="tabs-heading heading-pr">{{ section.settings.heading }}</h3>
    {% endif %}

    <!-- Circle Tabs -->
    <div class="circle-tabs">
      {% for block in section.blocks %}
        <button class="circle-tab{% if forloop.first %} active{% endif %}" data-tab="tab-{{ block.id }}">
          {% if block.settings.tab_image %}
            <img src="{{ block.settings.tab_image | img_url: '200x200' }}" alt="{{ block.settings.tab_name | escape }}">
          {% endif %}
          <span>{{ block.settings.tab_name }}</span>
        </button>
      {% endfor %}
    </div>

    <!-- Products per Tab -->
    {% for block in section.blocks %}
      {% assign tab_collection = block.settings.tab_collection %}
      <div class="tab-products{% if forloop.first %} active{% endif %}" id="tab-{{ block.id }}">
        <ul class="product-grid">
          {% for product in tab_collection.products %}
            <li class="product-item">
              <a href="{{ product.url }}">
                <div class="product-image">
                  {% if product.featured_image %}
                    <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title | escape }}">
                  {% endif %}
                </div>
                <h3>{{ product.title }}</h3>
                <p class="price">{{ product.price | money }}</p>
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  </div>
</div>

        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Project",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading",
      "default": "Choose your project:"
    },
    {
      "type": "image_picker",
      "id": "img1",
      "label": "Interior Image"
    },
    {
      "type": "image_picker",
      "id": "img2",
      "label": "Exterior Image"
    },
    {
      "type": "text",
      "id": "heading2",
      "label": "Secondary Heading",
      "default": "Choose your species:"
    }
  ],
  "blocks": [
    
     {
      "type": "tab",
      "name": "Tab",
      "settings": [
        { "type": "text", "id": "tab_name", "label": "Tab name" },
        { "type": "image_picker", "id": "tab_image", "label": "Tab image" },
        { "type": "collection", "id": "tab_collection", "label": "Collection to show" }
      ]
    }

  ],
  "presets": [
    {
      "name": "Project",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<script>
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.circle-tab').forEach(function(tabBtn){
    tabBtn.addEventListener('click', function(){
      document.querySelectorAll('.circle-tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('.tab-products').forEach(c=>c.classList.remove('active'));
      this.classList.add('active');
      document.getElementById(this.dataset.tab).classList.add('active');
    });
  });
});

</script>

<style>
.pro-first {
  display:flex;
  gap:50px;
}
.Interio, .exterior {
  width:50%;
  display:flex;
  flex-direction:column;
  gap:20px;
  justify-content:center;
  align-items:center;
}
.Interio img, .exterior img { width:100%; }

.inter-btn, .exter-btn {
  border-radius:50px;
  border:1px solid #000;
  padding:13px 37px;
  text-align:center;
  width:160px;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
}

h3.heading-pr {
  text-align:center;
  font-size:40px;
  font-weight:700;
}

.pro-second {
  background:#F5F5F5;
  border-radius:20px;
  padding:20px;
}



.circle-tabs-section { text-align: center; }
.circle-tabs {
  display: flex; flex-wrap: wrap; justify-content: center; gap: 1.5rem; margin-bottom: 2rem;
}
.circle-tab {
  background: none; border: none; cursor: pointer; text-align: center;
}
.circle-tab img {
  width: 90px; height: 90px; border-radius: 50%; object-fit: cover;
  border: 2px solid #ddd; transition: border-color .3s;
}
.circle-tab.active img, .circle-tab:hover img { border-color: #000; }
.circle-tab span { display: block; margin-top: .5rem; font-weight: 600; }
.tab-products { display: none; }
.tab-products.active { display: block; }
.product-grid {
  display: grid; grid-template-columns: repeat(auto-fill,minmax(200px,1fr));
  gap: 1.5rem; margin-top: 1rem;
}
.product-item img { width: 100%; height: auto; }
.price { color: #333; font-weight: 600; margin-top: .25rem; }

</style>
