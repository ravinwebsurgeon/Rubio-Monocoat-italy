{% comment %}
  Section: Technical Info FAQ
  Layout: Heading → Image on left → Accordion on right
{% endcomment %}
 {% assign tech_info_heading = product.metafields.custom.tech_info_heading.value %}
 {% assign image = product.metafields.custom.tech_info_image.value %}
{% if product.metafields.custom.technical_info_faq_question.value != blank and product.metafields.custom.technical_info_faq_answer.value != blank %}
<div class="tech-info-wrapper-sec">
  <div class="tech-info-wrapper page-width" id="technical-info">
    <div class="tech-info-inner">

      <!-- Left Side -->
      <div class="tech-info-left">
        {% if tech_info_heading != blank %}
          <h2 class="tech-info-heading">{{ tech_info_heading  }}</h2>
        {% endif %}
        {% if section.settings.image != blank %}
          <div class="tech-info-image">
            <img src="{{ image | img_url: '800x' }}" alt="{{ tech_info_heading | escape }}" loading="lazy">
          </div>
        {% endif %}
      </div>

      <!-- Right Side -->
      <div class="tech-info-content">
        <div class="tech-info-accordion">
          {% assign t_questions = product.metafields.custom.technical_info_faq_question.value %}
          {% assign t_answers = product.metafields.custom.technical_info_faq_answer.value %}

          {% if t_questions and t_answers %}
            {% for t_question in t_questions %}
              {% assign t_answer = t_answers[forloop.index0] %}
              <div class="tech-info-item {% if forloop.first %}active{% endif %}">
                <button type="button" class="tech-info-question">
                  <span>{{ t_question }}</span>
                  <span class="tech-info-icon">
                    <svg class="faq-arrow" width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5 7l5 6 5-6" stroke="black" stroke-width="2" fill="none" stroke-linecap="round"/>
                    </svg>
                  </span>
                </button>

                <div class="tech-info-answer">
                  {% if t_question contains 'Download' or t_question contains 'download' %}
                    <a href="{{ t_answer }}" class="tech-download-btn" onclick="forceDownload(event, this.href)">Download File</a>
                  {% else %}
                    <p>{{ t_answer }}</p>
                  {% endif %}
               </div>
              </div>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

{% comment %} <style>
.tech-info-wrapper {
  padding: 75px 89px;
  border-radius: 20px;
  background: #F5F5F5;
  max-width: 1700px;
  margin-top: 100px;
}
.tech-info-inner {
  display: flex;
  gap: 79px;
  align-items: center;
}
.tech-info-left {
  width:auto;
}
.tech-info-image img {
  max-width: 100%;
  border-radius: 20px;
  margin-top: 0;
}
.tech-info-content {
  flex: 1;
  padding-right: 93px;
}
.tech-info-heading {
  font-size: 30px;
  font-weight: 700;
  margin-bottom: 30px;
  margin-top: 0;
}
.tech-info-item {
  border-bottom: 1px solid #ccc;
  padding: 33px 0;
}
.tech-info-question {
  width: 100%;
  text-align: left;
  font-weight: 400;
  font-size: 24px;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0;
  letter-spacing: normal;
  line-height: normal;
  font-family: Frutiger Neue LT W1G;
}
.tech-info-icon {
  display: flex;
  align-items: center;
    transition: all ease 0.3s;
}
.faq-arrow {
  width: 20px;
  height: 20px;
  {% comment %} transition: transform 0.3s ease; {% endcomment %}
}
.tech-info-item.active .faq-arrow {
  transform: rotate(180deg);
}
.tech-info-answer {
  max-height: 0;
  overflow: hidden;
  transition: all ease 0.3s;
  font-size: 16px;
  line-height: normal;
  color:#000;
  font-family: Frutiger Neue LT W1G;
}
.tech-info-item.active .tech-info-answer {
  max-height: 500px;
  margin-top: 0;
}
@media(max-width: 768px) {
  .tech-info-inner {
    flex-direction: column;
  }
}
</style> {% endcomment %}


<style>
.tech-info-wrapper {
  padding: 40px 50px;
  border-radius: 20px;
  background: #fff;
  max-width: 1700px;
  width:100%;
}
.tech-info-wrapper-sec {
    background-color: #f8f8f8;
    padding: 100px 30px 50px;
}
.tech-info-inner {
  display: flex;
  gap: 79px;
  align-items: center;
}
.tech-info-left {
  width: 100%;
  max-width:450px;
}
.tech-info-image img {
  max-width: 100%;
  border-radius: 20px;
  margin-top: 0;
}
.tech-info-content {
  flex: 1;
      padding-right: 0;
    background-color: #ffffff;
    border-radius: 20px;
    padding-left: 0;
    padding-right:0;
    width:100%;
}
.tech-info-heading {
  font-size: 30px;
  font-weight: 700;
  margin-bottom: 30px;
  margin-top: 0;
}
.tech-info-item {
  border-bottom: 1px solid #000;
  padding: 33px 0;
}
.tech-info-item:last-child{
  border: none;
}
.tech-info-question {
  width: 100%;
  text-align: left;
  font-weight: 400;
  font-size: 24px;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0;
  letter-spacing: normal;
  line-height: normal;
  font-family: Frutiger Neue LT W1G;
  color:#000;
}
.tech-info-question span{
  color:#000;
}
.tech-info-answer p {
    margin-bottom: 0;
    margin-top: 20px;
}
.faq-arrow {
  width: 20px;
  height: 20px;
  transition: transform 0.3s ease;
}
.tech-info-item.active .faq-arrow {
  transform: rotate(180deg);
}
.tech-info-answer {
  overflow: hidden;
  height: 0;
  font-size: 16px;
  line-height: normal;
  color: #000;
  font-family: Frutiger Neue LT W1G;
  margin-top: 0;
  letter-spacing:normal;
}
@media(max-width: 1900px) {
  .tech-info-wrapper {
      padding: 40px;
  }
  .tech-info-wrapper-sec {
      background-color: #f8f8f8;
      padding: 40px 30px 20px;
  }
  .tech-info-content {
    {% comment %} padding-right: 0; {% endcomment %}
  }
  .tech-info-inner {
    gap: 50px;
  }
  .tech-info-item {
    padding: 20px 0;
  }
  .tech-info-question {
    font-size: 18px;
  }
  .tech-info-image img {
    aspect-ratio: 0.82;
    object-fit: cover;
  }
}
@media(max-width: 991px) {
  .tech-info-inner {
    flex-direction: column;
  }
  .tech-info-left {
      width: 100%;
  }
  .tech-info-image img {
      aspect-ratio: inherit;
      object-fit: cover;
      width: 100%;
  }
}
@media(max-width: 767px) {
  .tech-info-section {
      padding: 0 0;
  }
  .tech-info-wrapper {
      padding: 25px 15px;
      width: 100%;
      border-radius: 10px;
  }
  .tech-info-heading {
    font-size: 24px;
    margin-bottom: 10px;
    text-align: center;
  }
  .tech-info-image {
    display: none;
  }
  .tech-info-inner {
      gap: 0;
  }
  .tech-info-item {
      padding: 10px 0;
  }
  .tech-info-question {
      font-size: 14px;
  }
  .tech-info-answer {
    font-size: 12px;
  }
  .tech-info-answer p {
      margin-top: 12px;
  }
  .faq-arrow {
    width: 18px;
    height: 18px;
  }
}
</style>
<script>
function forceDownload(e, url) {
  e.preventDefault();
  const fileName = url.split('/').pop().split('?')[0];
  const a = document.createElement('a');
  a.href = url;
  a.setAttribute('download', fileName);
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>
<script>
$(document).ready(function () {
  $(".tech-info-question").on("click", function () {
    const $item = $(this).closest(".tech-info-item");
    const $answer = $item.find(".tech-info-answer");

    // Close others
    $item.siblings(".tech-info-item").removeClass("active")
         .find(".tech-info-answer")
         .each(function(){
            $(this).stop().animate({ height: 0 }, 300);
         });

    if ($item.hasClass("active")) {
      // Close current
      $item.removeClass("active");
      $answer.stop().animate({ height: 0 }, 300);
    } else {
      // Open current
      $item.addClass("active");
      const fullHeight = $answer.prop("scrollHeight");
      $answer.stop().animate({ height: fullHeight }, 300);
    }
  });
});
</script>




{% comment %} <script>
$(document).ready(function () {
  $(".tech-info-question").on("click", function () {
    const $item   = $(this).closest(".tech-info-item");
    const $answer = $item.find(".tech-info-answer");

    // Close other open items (optional—remove if you want multiple open)
    $item.siblings(".tech-info-item").removeClass("active")
         .find(".tech-info-answer").stop(true,true).slideUp(300);

    // Toggle active state for clicked item
    $item.toggleClass("active");

    // Slide the clicked answer up/down
    $answer.stop(true, true).slideToggle(300);

    // Rotate the arrow
    $item.find(".faq-arrow").toggleClass("rotated");
  });
});
</script> {% endcomment %}



{% schema %}
{
  "name": "Technical Info FAQ",
  "tag": "section",
  "class": "tech-info-section",
  "templates": ["product"],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Technical info"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Left Image"
    }
  ],
  "presets": [
    {
      "name": "Technical Info FAQ"
    }
  ]
}
{% endschema %}
