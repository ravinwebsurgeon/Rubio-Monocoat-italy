{% assign source_page = pages[section.settings.source_page] %}

<section class="inspired-collage">
  <div class="container">
    <div class="collage-header">
      <h2>{{ section.settings.heading }}</h2>
      <p>{{ section.settings.subheading }}</p>
    </div>
    <div class="collage-grid">
      {% assign inspired_wooden_images = source_page.metafields.custom.inspired_wooden_images.value %}
      {% assign products = section.settings.product_List %}
<p class="{{inspired_wooden_images}}">test</p>
{% for image in inspired_wooden_images %} {{ image }}{% endfor %}
      {% comment %}
        Loop over images from metafield and match with products.
        If there are more images than products, some products may repeat or be skipped.
      {% endcomment %}
      {% for image in inspired_wooden_images %}
        {% assign product = products[forloop.index0] %}
        {% if product %}
          <div class="collage-item {% if forloop.first %}large{% else %}small{% endif %}" 
               style="background-image: url('{{ image | file_url }}')">
            <a href="javascript:void(0);" class="product-overlay-btn" data-product-handle="{{ product.handle }}">
              <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="20" r="20" fill="black" fill-opacity="0.5"/>
                <circle cx="20" cy="20" r="9" fill="white"/>
              </svg>
            </a>
            <div class="hotspot-popup">
              <span class="close-hotspot">&times;</span>
              <div class="hotspot-content"></div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>  
</section>

{% schema %}
{
  "name": "Custom Inspired Wooden",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Get inspired by wooden floors" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Create a bedroom worth staying awake for with these inspiring ideas." },
    { "type": "product_list", "id": "product_List", "label": "Products" },
    {
    "type": "page",
    "id": "source_page",
    "label": "Select Page for Images"
    }
  ],
  "presets": [
    { "name": "CustomInspired Wooden", "category": "Sections" }
  ]
}
{% endschema %}