<div class="faq-main-container">
  <div class="custom-faq-wrapper">
    <div class="custom-faq-inner">

      <!-- Left Image -->
      <div class="cust-image-faq">
        <div class="custom-faq-image">
          {% assign default_image = section.settings.default_image %}
          {% if default_image != blank %}
            <img id="faq-left-image" src="{{ default_image | img_url: '800x' }}" alt="How to use" loading="lazy">
          {% endif %}
        </div>
      </div>

      <!-- Right FAQ Accordion -->
      <div class="cust-faq-content" id="how-to-apply">
        <div class="custom-faq-section">
          {% for block in section.blocks %}
            <div class="custom-faq-item {% if forloop.first %}active{% endif %}" data-image="{{ block.settings.image | img_url: '800x' }}">
              <button type="button" class="custom-faq-question">
                <h3>{{ block.settings.question }}</h3>
                <span class="custom-faq-icon">
                  <svg class="arrow" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 9l6 6 6-6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </button>

              <div class="custom-faq-answer" style="{% if forloop.first %}display:block{% else %}display:none{% endif %}">
                <p>{{ block.settings.answer }}</p>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>
</div>

<style>
.faq-main-container { background: #396948; }
.custom-faq-wrapper { max-width: 1745px; margin: 0 auto; padding: 100px 30px; }
.custom-faq-inner { display: flex; gap: 150px; align-items: center; }
.custom-faq-image img { max-width: 100%; border-radius: 10px; }
.custom-faq-section { flex: 1; }
.custom-faq-item { border-bottom: 1px solid #fff; padding: 10px 0; }
.custom-faq-question { width: 100%; text-align: left; font-weight: bold; background: none; border: none; cursor: pointer; padding: 10px 0; display: flex; justify-content: space-between; align-items: center; color:#fff; }
.custom-faq-icon svg { transition: transform 0.3s ease; }
.arrow-up { display: none; }
.custom-faq-answer { display: none; color:#fff; margin-top: 10px; }
.custom-faq-item h3 {
    margin: 0;
    font-family: Frutiger Neue LT W1G;
    font-weight: 700;
    font-size: 20px;
    line-height: 25px;
    text-align: center;
    color: #183029;
    background-color: #fff;
    padding: 15px 30px;
    border-radius: 50px;
}
.custom-faq-wrapper .custom-faq-inner .custom-faq-item:last-child {
    border: none;
}

@media(max-width: 1900px) { 
  .custom-faq-wrapper {
      max-width: 1745px;
      margin: 0 auto;
      padding: 50px 30px;
  }
  .custom-faq-wrapper .custom-faq-image {
    padding-bottom: 550px;
  }
  .custom-faq-item h3 {
    font-size: 14.5px;
    padding: 12px 22px;
  }
  .custom-faq-wrapper .custom-faq-inner .custom-faq-answer p {
      font-size: 16px;
      line-height: 1.5;
  }
  .custom-faq-wrapper .cust-faq-content {
      padding: 0 0 0 30px;
  }
  .custom-faq-wrapper .custom-faq-inner {
       gap: 20px;
  }
}

@media(max-width: 991px) { 
  .custom-faq-inner { 
    flex-direction: column; 
  } 
  .custom-faq-wrapper {
    padding: 50px 20px;
  }
}
@media(max-width: 767px) { 
  .custom-faq-wrapper {
      padding: 30px 20px;
  }
  .custom-faq-wrapper .custom-faq-image {
      padding-bottom: 0;
  }
  .custom-faq-wrapper .custom-faq-image img {
    position: static;
  }
   .custom-faq-item h3 {
    font-size: 14px;
    padding: 5.5px 14.5px;
  }
  .custom-faq-wrapper .custom-faq-inner .custom-faq-answer p {
    font-size: 12px;
  }
  .custom-faq-wrapper .custom-faq-inner .custom-faq-item {
      padding: 15px 0;
  }
}
</style>

<script>
$(document).ready(function() {
  $(".custom-faq-question").on("click", function() {
    var $item = $(this).closest(".custom-faq-item");
    var $answer = $item.find(".custom-faq-answer");

    if ($item.hasClass("active")) {
      $item.removeClass("active");
      $answer.slideUp(300);
    } else {
      $(".custom-faq-item").removeClass("active").find(".custom-faq-answer").slideUp(300);
      $item.addClass("active");
      $answer.slideDown(300);

      // Change left image dynamically
      var newImage = $item.data("image");
      if (newImage) {
        $("#faq-left-image").attr("src", newImage);
      }
    }
  });
});
</script>

{% schema %}
{
  "name": "How To Use FAQ NW",
  "tag": "section",
  "class": "faq-main-container",
  "settings": [
    {
      "type": "image_picker",
      "id": "default_image",
      "label": "Default Left Image"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "How do I use this product?"
        },
        {
          "type": "textarea",
          "id": "answer",
          "label": "Answer",
          "default": "This product can be used by following the steps mentioned here."
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image for this FAQ"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "How To Use FAQ NW",
      "category": "Custom",
      "blocks": [
        { "type": "faq_item" },
        { "type": "faq_item" },
        { "type": "faq_item" }
      ]
    }
  ]
}
{% endschema %}
